{% extends 'base.html' %}

{% block title %}
 | Resultados
{% endblock %}

{% block content %}
    {# Buscador #}
    <section class="our-height-4 col-12 d-flex align-items-center justify-content-center">
        {% include 'utils/search_bar.html' with context %}
    </section>

    <section class="col-12">
        <div class="col-12 mb-4 p-4 row border-bottom">
            <div class="col-3 offset-3">Contratos encontrados: {{ contratos|length }}</div>
            <div class="col-3">Tiempo total: {{ tiempo|round(2) }}s</div>
        </div>
        <div class="col-6 offset-3 mt-2">
          {% for contrato in contratos[:20] %}
            <div class="card border-dark mb-3 p-4 pointer {% if contrato.adjudicacion and contrato.librebor is not defined %} need-search {% endif %}"
                data-bs-toggle="modal" data-bs-target="#contratoModal{{ contrato._id }}" contract-id="{{ contrato._id }}"
                {% if contrato.adjudicacion %} contract-nif="{{ contrato.adjudicacion['nif adjudicatario'] }}" {% endif %} >

                <div class="card-body text-dark row">
                    <div class="col-12 text-truncate mb-3">
                        <label><b>Nombre del Contrato: </b></label>
                        {{ contrato.titulo }}
                    </div>
                    <div class="col-3">
                        <label><b>Estado:</b></label>
                        {{ contrato.status }}
                    </div>
                    <div class="col-6">
                        <label><b>Tipo:</b></label>
                        {{ contrato.categoria }}
                    </div>
                    <div class="col-3">
                        <label><b>Adjudicado:</b></label>
                      {% if contrato.adjudicacion %}
                        <i class="fa fa-check" aria-hidden="true"></i>
                      {% else %}
                        <i class="fa fa-times" aria-hidden="true"></i>
                      {% endif %}
                    </div>
                </div>
            </div>
            {% include 'utils/modal_contratos.html' with context %}
          {% endfor %}
        </div>
    </section>
{% endblock %}


{% block js_scripts %}
    {% assets filters="jsmin", output="js/results.min.js", "js/results.js" %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
{% endblock %}

